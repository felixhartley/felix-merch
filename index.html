<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Felix Merch</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #282828;
            --surface: #1a1a1a;
            --text: #ffffff;
            --text-muted: #888888;
            --accent: #e54854;
            --border: #333333;
            --success: #22c55e;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.5;
        }

        .container {
            max-width: 540px;
            margin: 0 auto;
            padding: 24px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Store header */
        .store-header {
            text-align: center;
            padding: 16px 0 40px;
        }

        .store-logo {
            font-size: 32px;
            font-weight: 400;
            font-style: italic;
            font-family: Georgia, 'Times New Roman', serif;
            color: var(--text);
            line-height: 1.3;
            max-width: 500px;
            margin: 0 auto;
        }

        /* Progress indicator */
        .progress {
            display: flex;
            gap: 6px;
            margin-bottom: 28px;
            padding: 0 4px;
        }

        .progress-dot {
            height: 2px;
            flex: 1;
            background: var(--border);
            transition: background 0.3s ease;
        }

        .progress-dot.active {
            background: var(--accent);
        }

        .progress-dot.completed {
            background: var(--accent);
        }

        /* Step container */
        .step {
            display: none;
            flex-direction: column;
            flex: 1;
            animation: fadeIn 0.3s ease;
        }

        .step.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Header */
        .step-header {
            margin-bottom: 20px;
        }

        .step-label {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--text-muted);
            margin-bottom: 6px;
        }

        .step-title {
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.02em;
            color: var(--text);
        }

        .step-subtitle {
            color: var(--text-muted);
            margin-top: 6px;
            font-size: 14px;
        }

        /* Category list */
        .category-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 24px;
        }

        .category-card {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .category-card:hover {
            border-color: var(--accent);
        }

        .category-card.selected {
            background: var(--accent);
            border-color: var(--accent);
        }

        .category-card.selected .category-name,
        .category-card.selected .category-price {
            color: white;
        }

        .category-info {
            flex: 1;
        }

        .category-name {
            font-weight: 500;
            font-size: 15px;
            color: var(--text);
        }

        .category-price {
            color: var(--text-muted);
            font-size: 13px;
            margin-top: 2px;
        }

        /* Lightbox */
        .lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .lightbox.visible {
            display: flex;
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.15s ease;
        }

        .lightbox-close:hover {
            background: rgba(255,255,255,0.1);
            border-color: white;
        }

        .lightbox-image {
            max-width: 90%;
            max-height: 80%;
            object-fit: contain;
        }

        /* Design grid */
        .design-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 24px;
            max-height: 420px;
            overflow-y: auto;
            padding-right: 4px;
        }

        .design-card {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 8px;
            cursor: default;
            transition: all 0.15s ease;
            text-align: center;
        }

        .design-card:hover {
            border-color: var(--accent);
        }

        .design-card.selected {
            background: var(--accent);
            border-color: var(--accent);
        }

        .design-card.selected .design-name {
            color: white;
        }

        .design-card.selected .design-image {
            opacity: 0.9;
        }

        .design-image {
            width: 100%;
            aspect-ratio: 1;
            background: #252525;
            margin-bottom: 6px;
            display: block;
            object-fit: cover;
            cursor: pointer;
            transition: opacity 0.15s ease;
        }

        .design-image:hover {
            opacity: 0.85;
        }

        .design-name {
            font-size: 11px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 8px;
            color: var(--text);
        }

        .design-select-btn {
            width: 100%;
            padding: 8px;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .design-select-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .design-card.selected .design-select-btn {
            background: white;
            border-color: white;
            color: var(--accent);
        }

        /* Options section */
        .options-section {
            margin-bottom: 20px;
        }

        .options-label {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Color options */
        .color-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        @media (max-width: 400px) {
            .color-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .color-btn {
            background: var(--surface);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.15s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .color-btn:hover {
            border-color: var(--accent);
        }

        .color-btn.selected {
            border-color: var(--accent);
            border-width: 2px;
        }

        .color-swatch {
            width: 100%;
            aspect-ratio: 1;
            border: none;
        }

        .color-name {
            font-size: 10px;
            color: var(--text);
            padding: 6px 4px;
            text-align: center;
            background: var(--surface);
            font-weight: 500;
        }

        /* Size options */
        .size-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }

        .size-btn {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 12px 8px;
            cursor: pointer;
            transition: all 0.15s ease;
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            color: var(--text);
        }

        .size-btn:hover {
            border-color: var(--accent);
        }

        .size-btn.selected {
            background: var(--accent);
            border-color: var(--accent);
            color: white;
        }

        /* Size chart */
        .size-chart-toggle {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            margin-top: 12px;
            padding: 8px 14px;
            background: transparent;
            border: 1px solid var(--border);
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .size-chart-toggle:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        .size-chart-toggle svg {
            width: 14px;
            height: 14px;
        }

        .size-chart {
            display: none;
            margin-top: 12px;
            background: var(--surface);
            padding: 14px;
            border: 1px solid var(--border);
        }

        .size-chart.visible {
            display: block;
        }

        .size-chart-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .size-chart-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            color: var(--text);
        }

        .size-chart-table th,
        .size-chart-table td {
            padding: 8px 6px;
            text-align: center;
            border-bottom: 1px solid var(--border);
        }

        .size-chart-table th {
            font-weight: 600;
            color: var(--text);
            background: #252525;
        }

        .size-chart-table th:first-child,
        .size-chart-table td:first-child {
            text-align: left;
            font-weight: 500;
        }

        .size-chart-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* Quantity selector */
        .quantity-row {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            background: var(--surface);
            border: 1px solid var(--border);
        }

        .qty-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.15s ease;
            color: var(--text);
        }

        .qty-btn:hover {
            background: #252525;
        }

        .qty-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .qty-value {
            font-size: 16px;
            font-weight: 600;
            min-width: 40px;
            text-align: center;
            border-left: 1px solid var(--border);
            border-right: 1px solid var(--border);
            padding: 8px 0;
            color: var(--text);
        }

        /* Cart summary */
        .cart-summary {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 16px;
            margin-bottom: 20px;
        }

        .cart-items-list {
            max-height: 280px;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            background: #252525;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: var(--text-muted);
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 2px;
            color: var(--text);
        }

        .cart-item-variant {
            font-size: 12px;
            color: var(--text-muted);
        }

        .cart-item-qty {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 2px;
        }

        .cart-item-price {
            font-weight: 600;
            font-size: 14px;
            color: var(--text);
        }

        .cart-item-remove {
            color: var(--accent);
            font-size: 11px;
            cursor: pointer;
            margin-top: 4px;
        }

        .cart-item-remove:hover {
            text-decoration: underline;
        }

        .cart-divider {
            height: 1px;
            background: var(--border);
            margin: 12px 0;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
            font-weight: 600;
            padding-top: 12px;
            color: var(--text);
        }

        /* Add more button */
        .add-more-btn {
            width: 100%;
            padding: 14px;
            border: 1px dashed var(--border);
            background: transparent;
            color: var(--text-muted);
            font-size: 13px;
            cursor: pointer;
            transition: all 0.15s ease;
            margin-bottom: 16px;
        }

        .add-more-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
        }

        /* Form fields */
        .form-group {
            margin-bottom: 14px;
        }

        .form-label {
            display: block;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .form-input {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid var(--border);
            font-size: 14px;
            transition: border-color 0.15s ease;
            background: var(--surface);
            color: var(--text);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-input::placeholder {
            color: #666;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 80px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            gap: 10px;
            margin-top: auto;
            padding-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 14px 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.15s ease;
            border: none;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            opacity: 0.9;
        }

        .btn-primary:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
        }

        .btn-secondary:hover {
            border-color: var(--text);
        }

        /* Success state */
        .success-icon {
            width: 64px;
            height: 64px;
            background: var(--success);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
        }

        .success-icon svg {
            width: 32px;
            height: 32px;
            stroke: white;
            stroke-width: 3;
        }

        .success-message {
            text-align: center;
            padding-top: 40px;
        }

        .success-message h2 {
            font-size: 22px;
            margin-bottom: 10px;
            color: var(--text);
        }

        .success-message p {
            color: var(--text-muted);
            margin-bottom: 20px;
            font-size: 14px;
        }

        .order-id {
            background: #252525;
            padding: 10px 18px;
            font-family: monospace;
            font-size: 13px;
            display: inline-block;
            border: 1px solid var(--border);
            color: var(--text);
        }

        .order-id-section {
            margin-top: 24px;
        }

        .order-id-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .qr-code-container {
            margin: 24px 0;
        }

        .qr-code-placeholder {
            width: 180px;
            height: 180px;
            background: #252525;
            border: 1px solid var(--border);
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-muted);
            font-size: 14px;
        }

        .continue-shopping {
            text-align: center;
            margin-top: 28px;
        }

        .continue-shopping a {
            color: var(--accent);
            text-decoration: underline;
            font-size: 13px;
        }

        /* Empty state */
        .empty-cart {
            text-align: center;
            padding: 32px 16px;
            color: var(--text-muted);
        }

        /* Scrollbar styling */
        .design-grid::-webkit-scrollbar,
        .cart-items-list::-webkit-scrollbar {
            width: 4px;
        }

        .design-grid::-webkit-scrollbar-track,
        .cart-items-list::-webkit-scrollbar-track {
            background: var(--border);
        }

        .design-grid::-webkit-scrollbar-thumb,
        .cart-items-list::-webkit-scrollbar-thumb {
            background: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Store Header -->
        <div class="store-header" id="store-header">
            <div class="store-logo">Felix shamelessly shoved a link. You clicked. Now you're here, no turning back. A T-shirt purchase restores balance to the universe.</div>
        </div>

        <!-- Progress Indicator -->
        <div class="progress">
            <div class="progress-dot" id="prog-1"></div>
            <div class="progress-dot" id="prog-2"></div>
            <div class="progress-dot" id="prog-3"></div>
            <div class="progress-dot" id="prog-4"></div>
            <div class="progress-dot" id="prog-5"></div>
        </div>

        <!-- Step 1: Browse Designs -->
        <div class="step active" id="step-1">
            <div class="step-header">
                <div class="step-label">Step 1 of 5</div>
                <h1 class="step-title">Adopt this tee</h1>
                <p class="step-subtitle">Choose your favorite design</p>
            </div>
            
            <!-- Lightbox -->
            <div class="lightbox" id="lightbox" onclick="closeLightbox(event)">
                <button class="lightbox-close" onclick="closeLightbox(event)">×</button>
                <img class="lightbox-image" id="lightbox-image" src="" alt="Design Preview">
            </div>
            
            <div class="design-grid" id="design-grid">
                <div class="design-card" data-design="Question Everything">
                    <img class="design-image" src="designs/question everything.jpg" alt="Question Everything" onclick="openLightbox(this)">
                    <div class="design-name">Question Everything</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Yes And Truckart">
                    <img class="design-image" src="designs/yesand Truckart.jpg" alt="Yes And Truckart" onclick="openLightbox(this)">
                    <div class="design-name">Yes And Truckart</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Improv Venn Diagram">
                    <img class="design-image" src="designs/improv venn diagram.jpg" alt="Improv Venn Diagram" onclick="openLightbox(this)">
                    <div class="design-name">Improv Venn Diagram</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Yes And Plain">
                    <img class="design-image" src="designs/yesand_plain.jpg" alt="Yes And Plain" onclick="openLightbox(this)">
                    <div class="design-name">Yes And Plain</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="What What">
                    <img class="design-image" src="designs/what what.jpg" alt="What What" onclick="openLightbox(this)">
                    <div class="design-name">What What</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Super">
                    <img class="design-image" src="designs/super.jpg" alt="Super" onclick="openLightbox(this)">
                    <div class="design-name">Super</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Ayoo">
                    <img class="design-image" src="designs/ayoo.jpg" alt="Ayoo" onclick="openLightbox(this)">
                    <div class="design-name">Ayoo</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Improv Stage">
                    <img class="design-image" src="designs/improv stage.jpg" alt="Improv Stage" onclick="openLightbox(this)">
                    <div class="design-name">Improv Stage</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Moo">
                    <img class="design-image" src="designs/moo.jpg" alt="Moo" onclick="openLightbox(this)">
                    <div class="design-name">Moo</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Awesome Rasam">
                    <img class="design-image" src="designs/awesome rasam.jpg" alt="Awesome Rasam" onclick="openLightbox(this)">
                    <div class="design-name">Awesome Rasam</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Giraffe">
                    <img class="design-image" src="designs/giraffe.jpg" alt="Giraffe" onclick="openLightbox(this)">
                    <div class="design-name">Giraffe</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Sassy Kitty">
                    <img class="design-image" src="designs/sassy kitty.jpg" alt="Sassy Kitty" onclick="openLightbox(this)">
                    <div class="design-name">Sassy Kitty</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Foxy">
                    <img class="design-image" src="designs/foxy.jpg" alt="Foxy" onclick="openLightbox(this)">
                    <div class="design-name">Foxy</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Yes And Type">
                    <img class="design-image" src="designs/yesand type.jpg" alt="Yes And Type" onclick="openLightbox(this)">
                    <div class="design-name">Yes And Type</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="And Scene">
                    <img class="design-image" src="designs/and scene.jpg" alt="And Scene" onclick="openLightbox(this)">
                    <div class="design-name">And Scene</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
                <div class="design-card" data-design="Eat Sleep Improv">
                    <img class="design-image" src="designs/eat sleep improv.jpg" alt="Eat Sleep Improv" onclick="openLightbox(this)">
                    <div class="design-name">Eat Sleep Improv</div>
                    <button class="design-select-btn" onclick="selectDesign(this.parentElement)">Yep, This one</button>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-primary" onclick="nextStep()" id="btn-step1" disabled>Let's do this</button>
            </div>
        </div>

        <!-- Step 2: Browse Categories -->
        <div class="step" id="step-2">
            <div class="step-header">
                <div class="step-label">Step 2 of 5</div>
                <h1 class="step-title">Choose your fit</h1>
                <p class="step-subtitle">It's just a category. Totally harmless.</p>
            </div>
            <div class="category-list">
                <div class="category-card" data-category="regular" data-price="1000" onclick="selectCategory(this)">
                    <div class="category-info">
                        <div class="category-name">Regular T-Shirt</div>
                        <div class="category-price">₹1000</div>
                    </div>
                </div>
                <div class="category-card" data-category="oversized-tshirt" data-price="1200" onclick="selectCategory(this)">
                    <div class="category-info">
                        <div class="category-name">Oversized T-Shirt</div>
                        <div class="category-price">₹1200</div>
                    </div>
                </div>
                <div class="category-card" data-category="oversized-hoodie" data-price="1800" onclick="selectCategory(this)">
                    <div class="category-info">
                        <div class="category-name">Oversized Hoodie</div>
                        <div class="category-price">₹1800</div>
                    </div>
                </div>
                <div class="category-card" data-category="sweatshirt" data-price="1500" onclick="selectCategory(this)">
                    <div class="category-info">
                        <div class="category-name">Sweatshirt</div>
                        <div class="category-price">₹1500</div>
                    </div>
                </div>
                <div class="category-card" data-category="zipper-hoodie" data-price="2000" onclick="selectCategory(this)">
                    <div class="category-info">
                        <div class="category-name">Zipper Hoodie</div>
                        <div class="category-price">₹2000</div>
                    </div>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">Back</button>
                <button class="btn btn-primary" onclick="nextStep()" id="btn-step2" disabled>Lesssgo</button>
            </div>
        </div>

        <!-- Step 3: Color, Size & Quantity -->
        <div class="step" id="step-3">
            <div class="step-header">
                <div class="step-label">Step 3 of 5</div>
                <h1 class="step-title">Customize</h1>
                <p class="step-subtitle">Colour, size, quantity. The holy trinity of good decisions.</p>
            </div>

            <div class="options-section">
                <div class="options-label">Color</div>
                <div class="color-grid" id="color-grid">
                    <!-- Colors loaded dynamically based on category -->
                </div>
            </div>

            <div class="options-section">
                <div class="options-label">Size</div>
                <div class="size-grid">
                    <div class="size-btn" data-size="S" onclick="selectSize(this)">S</div>
                    <div class="size-btn" data-size="M" onclick="selectSize(this)">M</div>
                    <div class="size-btn" data-size="L" onclick="selectSize(this)">L</div>
                    <div class="size-btn" data-size="XL" onclick="selectSize(this)">XL</div>
                    <div class="size-btn" data-size="XXL" onclick="selectSize(this)">XXL</div>
                </div>
                <button class="size-chart-toggle" onclick="toggleSizeChart()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 21H3V3" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M21 9L15 15L9 9L3 15" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Check Size Chart
                </button>
                <div class="size-chart" id="size-chart">
                    <div class="size-chart-title">Size Chart (in inches)</div>
                    <table class="size-chart-table" id="size-chart-table">
                        <!-- Size chart loaded dynamically -->
                    </table>
                </div>
            </div>

            <div class="options-section">
                <div class="options-label">Quantity</div>
                <div class="quantity-row">
                    <div class="quantity-selector">
                        <button class="qty-btn" onclick="updateQuantity(-1)" id="qty-minus">−</button>
                        <span class="qty-value" id="qty-value">1</span>
                        <button class="qty-btn" onclick="updateQuantity(1)" id="qty-plus">+</button>
                    </div>
                </div>
            </div>

            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">Back</button>
                <button class="btn btn-primary" onclick="addToCart()" id="btn-step3" disabled>Fine. Add to Cart.</button>
            </div>
        </div>

        <!-- Step 4: Cart Review -->
        <div class="step" id="step-4">
            <div class="step-header">
                <div class="step-label">Step 4 of 5</div>
                <h1 class="step-title">Well Well… Look What Happened</h1>
                <p class="step-subtitle">Final check. No pressure.</p>
            </div>
            <button class="add-more-btn" onclick="addMoreItems()">+ Add another item</button>
            <div class="cart-summary">
                <div class="cart-items-list" id="cart-items">
                    <!-- Cart items rendered here -->
                </div>
                <div class="cart-divider"></div>
                <div class="cart-total">
                    <span>Total</span>
                    <span id="cart-total">₹0</span>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="prevStep()">Back</button>
                <button class="btn btn-primary" onclick="nextStep()" id="btn-step4">I Regret Nothing</button>
            </div>
        </div>

        <!-- Step 5: Checkout Form -->
        <div class="step" id="step-5">
            <div class="step-header">
                <div class="step-label">Step 5 of 5</div>
                <h1 class="step-title">Checkout</h1>
                <p class="step-subtitle">The Part Where You Type Things</p>
            </div>
            <form id="checkout-form" onsubmit="submitOrder(event)">
                <div class="form-group">
                    <label class="form-label">Full Name *</label>
                    <input type="text" class="form-input" name="name" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email *</label>
                    <input type="email" class="form-input" name="email" placeholder="your@email.com" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number *</label>
                    <input type="tel" class="form-input" name="phone" placeholder="+91 XXXXX XXXXX" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Delivery Address *</label>
                    <textarea class="form-input" name="address" placeholder="House/Flat No., Street, Landmark" required></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">City *</label>
                        <input type="text" class="form-input" name="city" placeholder="City" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">PIN Code *</label>
                        <input type="text" class="form-input" name="pincode" placeholder="PIN Code" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Order Notes (Optional)</label>
                    <textarea class="form-input" name="notes" placeholder="Any special requests or notes?" style="min-height: 60px"></textarea>
                </div>
                <div class="nav-buttons">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="submit" class="btn btn-primary">Make It Official</button>
                </div>
            </form>
        </div>

        <!-- Success Step -->
        <div class="step" id="step-success">
            <div class="success-message">
                <div class="success-icon">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M5 13l4 4L19 7" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h2>Well, That Escalated Beautifully.</h2>
                <p>Kindly pay for the damage of <strong id="final-amount">₹0</strong> using this QR code</p>
                <div class="qr-code-container">
                    <div class="qr-code-placeholder" id="qr-code">
                        <!-- QR code image goes here -->
                        <span>QR Code</span>
                    </div>
                </div>
                <div class="order-id-section">
                    <p class="order-id-label">Your Order ID</p>
                    <div class="order-id" id="order-id">FLX-XXXXX</div>
                </div>
            </div>
            <div class="continue-shopping">
                <a href="#" onclick="resetStore()">Continue Shopping</a>
            </div>
        </div>
    </div>

    <script>
        // Category data with prices and colors
        const categories = {
            'regular': { 
                name: 'Regular T-Shirt', 
                price: 1000,
                colors: [
                    { name: 'Black', hex: '#000000' },
                    { name: 'White', hex: '#ffffff' },
                    { name: 'Red', hex: '#ff0000' },
                    { name: 'Green', hex: '#008000' },
                    { name: 'Yellow', hex: '#ffff00' },
                    { name: 'Grey', hex: '#808080' },
                    { name: 'Dark Purple', hex: '#3f00f1' },
                    { name: 'Charcoal Grey', hex: '#3f3a4a' },
                    { name: 'Lavender', hex: '#a87eb5' },
                    { name: 'Peach', hex: '#f78266' },
                    { name: 'Dark Green', hex: '#05270b' },
                    { name: 'Chocolate Brown', hex: '#290c06' },
                    { name: 'Beige', hex: '#bba576' }
                ]
            },
            'oversized-tshirt': { 
                name: 'Oversized T-Shirt', 
                price: 1200,
                colors: [
                    { name: 'Black', hex: '#000000' },
                    { name: 'White', hex: '#ffffff' },
                    { name: 'Beige', hex: '#bba576' },
                    { name: 'Green', hex: '#00a15a' },
                    { name: 'Lavender', hex: '#a87eb5' },
                    { name: 'Royal Blue', hex: '#095be5' },
                    { name: 'Pink', hex: '#f8cdd5' },
                    { name: 'Chocolate Brown', hex: '#290c06' }
                ]
            },
            'oversized-hoodie': { 
                name: 'Oversized Hoodie', 
                price: 1800,
                colors: [
                    { name: 'Black', hex: '#000000' },
                    { name: 'White', hex: '#ffffff' },
                    { name: 'Lavender', hex: '#a87eb5' },
                    { name: 'Cinder', hex: '#14141c' },
                    { name: 'Firefly', hex: '#08343c' },
                    { name: 'Jordy Blue', hex: '#8abad3' },
                    { name: 'Beige', hex: '#bba576' },
                    { name: 'Chocolate Brown', hex: '#290c06' }
                ]
            },
            'sweatshirt': { 
                name: 'Sweatshirt', 
                price: 1500,
                colors: [
                    { name: 'Black', hex: '#000000' },
                    { name: 'White', hex: '#ffffff' },
                    { name: 'Cinder', hex: '#14141c' },
                    { name: 'Dark Green', hex: '#05270b' },
                    { name: 'Sky Blue', hex: '#87ceeb' }
                ]
            },
            'zipper-hoodie': { 
                name: 'Zipper Hoodie', 
                price: 2000,
                colors: [
                    { name: 'Black', hex: '#000000' },
                    { name: 'White', hex: '#ffffff' }
                ]
            }
        };

        // State
        let currentStep = 1;
        let selectedCategory = null;
        let selectedCategoryPrice = 0;
        let selectedDesign = null;
        let selectedColor = null;
        let selectedSize = null;
        let quantity = 1;
        let cart = [];

        // Navigation
        function updateProgress() {
            for (let i = 1; i <= 5; i++) {
                const dot = document.getElementById(`prog-${i}`);
                dot.classList.remove('active', 'completed');
                if (i < currentStep) {
                    dot.classList.add('completed');
                } else if (i === currentStep) {
                    dot.classList.add('active');
                }
            }
        }

        function showStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById(`step-${step}`).classList.add('active');
            currentStep = step;
            updateProgress();
            
            // Show header only on step 1
            const header = document.getElementById('store-header');
            if (step === 1) {
                header.style.display = 'block';
            } else {
                header.style.display = 'none';
            }
        }

        function nextStep() {
            if (currentStep < 5) {
                if (currentStep === 2) {
                    loadColorsForCategory();
                }
                showStep(currentStep + 1);
            }
        }

        function loadColorsForCategory() {
            const colorGrid = document.getElementById('color-grid');
            const categoryColors = categories[selectedCategory].colors;
            
            colorGrid.innerHTML = categoryColors.map(color => `
                <div class="color-btn" data-color="${color.name}" onclick="selectColor(this)">
                    <div class="color-swatch" style="background: ${color.hex}"></div>
                    <span class="color-name">${color.name}</span>
                </div>
            `).join('');

            loadSizeChart();
            document.getElementById('size-chart').classList.remove('visible');
        }

        // Size chart data for each category
        const sizeCharts = {
            'regular': {
                headers: ['Size', 'S', 'M', 'L', 'XL', '2XL'],
                rows: [
                    ['Chest', '38', '40', '42', '44', '46'],
                    ['Length', '26', '27', '28', '29', '30']
                ]
            },
            'oversized-tshirt': {
                headers: ['Size', 'S', 'M', 'L', 'XL', '2XL'],
                rows: [
                    ['Chest', '43', '45', '47', '49', '51'],
                    ['Length', '28.5', '29', '29.5', '30', '30.5']
                ]
            },
            'oversized-hoodie': {
                headers: ['Size', 'S', 'M', 'L', 'XL', '2XL'],
                rows: [
                    ['Chest', '44', '46', '48', '50', '52'],
                    ['Length', '26', '27', '28', '29', '30'],
                    ['Sleeve', '22', '22.5', '23', '23.5', '24'],
                    ['Shoulder', '21', '22', '24', '24', '25']
                ]
            },
            'sweatshirt': {
                headers: ['Size', 'S', 'M', 'L', 'XL', '2XL'],
                rows: [
                    ['Chest', '40', '42', '44', '46', '46'],
                    ['Length', '27', '28', '29', '30', '30'],
                    ['Sleeve', '22', '23', '23', '24', '24'],
                    ['Shoulder', '22', '23', '24', '25', '25']
                ]
            },
            'zipper-hoodie': {
                headers: ['Size', 'S', 'M', 'L', 'XL', '2XL'],
                rows: [
                    ['Chest', '44', '46', '48', '50', '52'],
                    ['Length', '26', '27', '28', '29', '30'],
                    ['Sleeve', '22', '22.5', '23', '23.5', '24'],
                    ['Shoulder', '21', '22', '23', '24', '25']
                ]
            }
        };

        function loadSizeChart() {
            const table = document.getElementById('size-chart-table');
            const chartData = sizeCharts[selectedCategory];

            let html = '<thead><tr>';
            chartData.headers.forEach(header => {
                html += `<th>${header}</th>`;
            });
            html += '</tr></thead><tbody>';

            chartData.rows.forEach(row => {
                html += '<tr>';
                row.forEach(cell => {
                    html += `<td>${cell}</td>`;
                });
                html += '</tr>';
            });
            html += '</tbody>';

            table.innerHTML = html;
        }

        function toggleSizeChart() {
            const sizeChart = document.getElementById('size-chart');
            sizeChart.classList.toggle('visible');
        }

        function prevStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        function selectCategory(el) {
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedCategory = el.dataset.category;
            selectedCategoryPrice = parseInt(el.dataset.price);
            document.getElementById('btn-step2').disabled = false;
        }

        function selectDesign(el) {
            document.querySelectorAll('.design-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedDesign = el.dataset.design;
            document.getElementById('btn-step1').disabled = false;
        }

        function openLightbox(imgEl) {
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightbox-image');
            lightboxImage.src = imgEl.src;
            lightboxImage.alt = imgEl.alt;
            lightbox.classList.add('visible');
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox(event) {
            if (event.target.id === 'lightbox' || event.target.classList.contains('lightbox-close')) {
                const lightbox = document.getElementById('lightbox');
                lightbox.classList.remove('visible');
                document.body.style.overflow = '';
            }
        }

        function selectColor(el) {
            document.querySelectorAll('.color-btn').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedColor = el.dataset.color;
            checkStep3Complete();
        }

        function selectSize(el) {
            document.querySelectorAll('.size-btn').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedSize = el.dataset.size;
            checkStep3Complete();
        }

        function checkStep3Complete() {
            const isComplete = selectedColor && selectedSize;
            document.getElementById('btn-step3').disabled = !isComplete;
        }

        function updateQuantity(change) {
            quantity = Math.max(1, Math.min(10, quantity + change));
            document.getElementById('qty-value').textContent = quantity;
            document.getElementById('qty-minus').disabled = quantity <= 1;
            document.getElementById('qty-plus').disabled = quantity >= 10;
        }

        function addToCart() {
            cart.push({
                category: selectedCategory,
                categoryName: categories[selectedCategory].name,
                price: selectedCategoryPrice,
                design: selectedDesign,
                color: selectedColor,
                size: selectedSize,
                quantity: quantity
            });
            renderCart();
            showStep(4);
        }

        function renderCart() {
            const cartItems = document.getElementById('cart-items');
            let total = 0;

            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
                document.getElementById('btn-step4').disabled = true;
            } else {
                document.getElementById('btn-step4').disabled = false;
                cartItems.innerHTML = cart.map((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    return `
                        <div class="cart-item">
                            <div class="cart-item-image">${item.design}</div>
                            <div class="cart-item-details">
                                <div class="cart-item-name">${item.categoryName}</div>
                                <div class="cart-item-variant">${item.design} • ${item.color} • ${item.size}</div>
                                <div class="cart-item-qty">Qty: ${item.quantity}</div>
                                <div class="cart-item-remove" onclick="removeFromCart(${index})">Remove</div>
                            </div>
                            <div class="cart-item-price">₹${itemTotal}</div>
                        </div>
                    `;
                }).join('');
            }

            document.getElementById('cart-total').textContent = `₹${total}`;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            renderCart();
            if (cart.length === 0) {
                addMoreItems();
            }
        }

        function addMoreItems() {
            selectedCategory = null;
            selectedCategoryPrice = 0;
            selectedDesign = null;
            selectedColor = null;
            selectedSize = null;
            quantity = 1;
            document.getElementById('qty-value').textContent = '1';
            
            document.getElementById('btn-step1').disabled = true;
            document.getElementById('btn-step2').disabled = true;
            document.getElementById('btn-step3').disabled = true;
            
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.design-card').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.color-btn').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.size-btn').forEach(c => c.classList.remove('selected'));
            
            showStep(1);
        }

        async function submitOrder(e) {
            e.preventDefault();
            const form = e.target;
            const formData = new FormData(form);
            const submitBtn = form.querySelector('button[type="submit"]');
            
            // Disable button and show loading
            submitBtn.disabled = true;
            submitBtn.textContent = 'Processing...';
            
            const totalAmount = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            const orderData = {
                orderId: 'FLX-' + Math.random().toString(36).substr(2, 5).toUpperCase(),
                customer: {
                    name: formData.get('name'),
                    email: formData.get('email'),
                    phone: formData.get('phone'),
                    address: formData.get('address'),
                    city: formData.get('city'),
                    pincode: formData.get('pincode'),
                    notes: formData.get('notes')
                },
                items: cart.map(item => ({
                    category: item.categoryName,
                    design: item.design,
                    color: item.color,
                    size: item.size,
                    quantity: item.quantity,
                    price: item.price,
                    total: item.price * item.quantity
                })),
                total: totalAmount,
                timestamp: new Date().toISOString()
            };

            try {
                // Send to Google Sheets
                const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwRG8vhxdYMyYIv81yVN1OaykRbL_mBpUyuFiMzhjXs9lWQa8UFKIUBmNKsVyI5J4V3dw/exec';
                
                await fetch(GOOGLE_SCRIPT_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderData)
                });
                
                // Save to localStorage as backup
                const orders = JSON.parse(localStorage.getItem('felix_merch_orders') || '[]');
                orders.push(orderData);
                localStorage.setItem('felix_merch_orders', JSON.stringify(orders));
                
                // Show success
                document.getElementById('order-id').textContent = orderData.orderId;
                document.getElementById('final-amount').textContent = '₹' + totalAmount;
                document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
                document.getElementById('step-success').classList.add('active');
                document.querySelector('.progress').style.display = 'none';
                
                // Clear cart
                cart = [];
                
            } catch (error) {
                console.error('Error:', error);
                
                // Still show success page even if API fails
                document.getElementById('order-id').textContent = orderData.orderId;
                document.getElementById('final-amount').textContent = '₹' + totalAmount;
                document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
                document.getElementById('step-success').classList.add('active');
                document.querySelector('.progress').style.display = 'none';
            }
            
            submitBtn.disabled = false;
            submitBtn.textContent = 'Make It Official';
        }

        function resetStore() {
            cart = [];
            selectedCategory = null;
            selectedCategoryPrice = 0;
            selectedDesign = null;
            selectedColor = null;
            selectedSize = null;
            quantity = 1;
            
            document.getElementById('checkout-form').reset();
            document.getElementById('qty-value').textContent = '1';
            document.getElementById('btn-step1').disabled = true;
            document.getElementById('btn-step2').disabled = true;
            document.getElementById('btn-step3').disabled = true;
            
            document.querySelectorAll('.category-card').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.design-card').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.color-btn').forEach(c => c.classList.remove('selected'));
            document.querySelectorAll('.size-btn').forEach(c => c.classList.remove('selected'));
            
            document.querySelector('.progress').style.display = 'flex';
            showStep(1);
        }

        updateProgress();
    </script>
</body>
</html>
